# Performance Report: RTK Memory Layer (Post-Fix)

**Date**: 2026-02-18 12:33:35 UTC
**PRD Guardrails**: cache-hit p95 < 200ms, savings >= 50%

## Benchmark Source

- Script: `benchmarks/memory/bench_memory.sh`
- Analyzer: `benchmarks/memory/analyze_memory.py --fail-on-thresholds`
- Environment: `benchmarks/memory/results_env.txt`

## Current Measured Metrics

| Scenario | p50 ms | p95 ms | p99 ms | cache_hit_rate |
|---|---:|---:|---:|---:|
| cli_hot | 10.402 | 11.301 | 12.190 | 1.00 |
| api_hot | 7.334 | 8.052 | 8.723 | 1.00 |
| cli_cold | 43.006 | 57.382 | 60.214 | 0.00 |

`memory_gain savings`: **89.00%**

## Native Explore Baseline Comparison

Baseline assumption from observed native Explore: **52,000 tokens/run** (`native_explore_tokens: 52000`).

| Step Count (explore-driven) | Native tokens | Memory tokens (est.) | Saved tokens | Savings |
|---:|---:|---:|---:|---:|
| 1 | 52,000 | 5,720 | 46,280 | 89.00% |
| 3 | 156,000 | 17,160 | 138,840 | 89.00% |
| 5 | 260,000 | 28,600 | 231,400 | 89.00% |

## Threshold Gates (Automated)

- PASS: `cli hot p95 < 200ms`
- PASS: `cli hot cache-hit rate >= 0.95`
- PASS: `api hot p95 < 200ms`
- PASS: `cli hot p50 < cli cold p50`
- PASS: `memory gain savings >= 50%`
- PASS: `estimated memory tokens <= 50% of native explore baseline`
- PASS: `5-step cumulative savings >= 1x native explore baseline`

## Interpretation

1. Латентность hot-path существенно ниже PRD-гардрейла (однозначный запас).
2. По токенам выигрыш против native Explore (52k baseline) выраженный уже на первом проходе и сильно накапливается на последующих шагах.
3. Для follow-up действий модель подтверждает «ощутимый» cumulative эффект: на 5 explore-driven шагах экономия > 231k tokens.
